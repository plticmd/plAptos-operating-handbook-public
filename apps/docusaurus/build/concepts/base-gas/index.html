<!doctype html>
<html lang="ja" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-concepts/base-gas" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Computing Transaction Gas | Aptos Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://aptos.dev/img/meta/og-aptos-docs-default.png"><meta data-rh="true" name="twitter:image" content="https://aptos.dev/img/meta/og-aptos-docs-default.png"><meta data-rh="true" property="og:url" content="https://aptos.dev/concepts/base-gas"><meta data-rh="true" property="og:locale" content="ja"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Computing Transaction Gas | Aptos Docs"><meta data-rh="true" name="description" content="Aptos transactions by default charge a base gas fee, regardless of market conditions."><meta data-rh="true" property="og:description" content="Aptos transactions by default charge a base gas fee, regardless of market conditions."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://aptos.dev/concepts/base-gas"><link data-rh="true" rel="alternate" href="https://aptos.dev/concepts/base-gas" hreflang="en"><link data-rh="true" rel="alternate" href="https://aptos.dev/ja/concepts/base-gas" hreflang="ja"><link data-rh="true" rel="alternate" href="https://aptos.dev/concepts/base-gas" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://HM7UY0NMLG-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-HVB7QFB9PQ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-HVB7QFB9PQ",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Aptos Docs" href="/opensearch.xml">




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<link rel="stylesheet" href="https://unpkg.com/@stoplight/elements@7.7.5/styles.min.css" integrity="sha384-1lLf7J28IOR7k5RlItk6Y+G3hDgVB3y4RCgWNq6ZSwjYfvJXPtZAdW0uklsAZbGW" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.89bf2db0.css">
<script src="/assets/js/runtime~main.65eb5df6.js" defer="defer"></script>
<script src="/assets/js/main.0a39c1ce.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="メインコンテンツまでスキップ"><a class="skipToContent_rfFn" href="#__docusaurus_skipToContent_fallback">メインコンテンツまでスキップ</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/aptos_word.svg" alt="Aptos Labs Logo" class="themedComponent_iS9h themedComponent--light_Wu9q"><img src="/img/aptos_word_dark.svg" alt="Aptos Labs Logo" class="themedComponent_iS9h themedComponent--dark_ZuQW"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_EebW"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>日本語</a><ul class="dropdown__menu"><li><a href="/concepts/base-gas" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/ja/concepts/base-gas" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="ja">日本語</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/aptos-white-paper">Start</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/concepts">Learn about Aptos</a></li><li><a class="dropdown__link" href="/guides/explore-aptos">Explore Aptos</a></li><li><a class="dropdown__link" href="/releases/aptos-releases">Latest Releases</a></li><li><a class="dropdown__link" href="/nodes/networks">Networks</a></li><li><a class="dropdown__link" href="/aptos-white-paper">Read the Aptos White Paper</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/tutorials">Build</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/tutorials">Tutorials</a></li><li><a class="dropdown__link" href="/move/move-on-aptos">Learn the Move Language</a></li><li><a class="dropdown__link" href="/standards">Aptos Standards</a></li><li><a class="dropdown__link" href="/apis">Aptos APIs</a></li><li><a class="dropdown__link" href="/sdks/index">Aptos SDKs</a></li><li><a class="dropdown__link" href="/tools/aptos-cli">Aptos CLI</a></li><li><a class="dropdown__link" href="/integration">Integrate with Aptos</a></li><li><a class="dropdown__link" href="/tutorials/build-e2e-dapp/e2e-dapp-index">Build E2E Dapp on Aptos</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/nodes/nodes-landing">Nodes</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/nodes/nodes-landing">Learn about Nodes</a></li><li><a class="dropdown__link" href="/nodes/validator-node/validators">Run a Validator and VFN</a></li><li><a class="dropdown__link" href="/nodes/full-node/public-fullnode">Run a Public Fullnode</a></li><li><a class="dropdown__link" href="/nodes/operations/operations-index">Bootstrap a Node</a></li><li><a class="dropdown__link" href="/nodes/configure/configure-index">Configure a Node</a></li><li><a class="dropdown__link" href="/nodes/measure/measure-index">Monitor a Node</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/nodes/aptos-api-spec">Reference</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/nodes/aptos-api-spec">Aptos REST API Spec</a></li><li><a class="dropdown__link" href="/reference/error-codes">Aptos Errors Codes</a></li><li><a class="dropdown__link" href="/reference/move">Aptos Move Framework</a></li><li><a class="dropdown__link" href="/reference/glossary">Aptos Glossary</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/community">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/community">Help the Aptos Ecosystem</a></li><li><a class="dropdown__link" href="/community/external-resources">External Resources</a></li><li><a class="dropdown__link" href="/community/site-updates">Update Aptos.dev</a></li><li><a class="dropdown__link" href="/community/aptos-style">Follow Aptos Style</a></li><li><a class="dropdown__link" href="/community/contributors">Contributors</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://learn.aptoslabs.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Learn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_c6F6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/aptos-labs/aptos-developer-discussions/discussions" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Dev Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_c6F6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_wwMH colorModeToggle_GDDh"><button class="clean-btn toggleButton_faKJ toggleButtonDisabled_aZcY" type="button" disabled="" title="ダークモードを切り替える(現在はダークモード)" aria-label="ダークモードを切り替える(現在はダークモード)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_m8__"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_ZVRe"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_g2EE"><button type="button" class="DocSearch DocSearch-Button" aria-label="検索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">検索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_gkQL"><div class="docsWrapper_Qxyk"><button aria-label="先頭へ戻る" class="clean-btn theme-back-to-top-button backToTopButton_sWPH" type="button"></button><div class="docRoot_uKhe"><aside class="theme-doc-sidebar-container docSidebarContainer_Sj9c"><div class="sidebarViewport_Me7G"><div class="sidebar_JlDQ"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_YW1f"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 sidebar-title">Start</li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/concepts/">Learn about Aptos</a><button aria-label="Collapse sidebar category &#x27;Learn about Aptos&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/concepts/blockchain">Aptos Blockchain Deep Dive</a><button aria-label="Expand sidebar category &#x27;Aptos Blockchain Deep Dive&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/move-on-aptos">Move - A Web3 Language and Runtime</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/accounts">Accounts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/resources">Resources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/events">Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/txns-states">Transactions and States</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/gas-txn-fee">Gas and Storage Fees</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/concepts/base-gas">Computing Transaction Gas</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/blocks">Blocks</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/concepts/staking">Staking</a><button aria-label="Expand sidebar category &#x27;Staking&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/governance">Governance</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/guides/explore-aptos">Explore Aptos</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/releases/aptos-releases">Latest Aptos Releases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/nodes/networks">Networks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/aptos-white-paper/">Aptos White Paper(日本語)</a></li></ul></nav><button type="button" title="サイドバーを隠す" aria-label="サイドバーを隠す" class="button button--secondary button--outline collapseSidebarButton_snYO"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_Jf0I"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_fHdE"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_OUYU"><div class="docItemContainer_rlCk"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_A7pt" aria-label="パンくずリストのナビゲーション"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ホームページ" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_cEG4"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/concepts/"><span itemprop="name">Learn about Aptos</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Computing Transaction Gas</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_MUT3 theme-doc-toc-mobile tocMobile_q7HR"><button type="button" class="clean-btn tocCollapsibleButton_gS9W">このページの見出し</button></div><div class="theme-doc-markdown markdown"><h1>Computing Transaction Gas</h1>
<p>Aptos transactions by default charge a base gas fee, regardless of market conditions.
For each transaction, this &quot;base gas&quot; amount is based on three conditions:</p>
<ol>
<li>Instructions.</li>
<li>Storage.</li>
<li>Payload.</li>
</ol>
<p>The more function calls, branching conditional statements, etc. that a transaction requires, the more instruction gas it will cost.
Likewise, the more reads from and writes into global storage that a transaction requires, the more storage gas it will cost.
Finally, the more bytes in a transaction payload, the more it will cost.</p>
<p>As explained in the <a href="#optimization-principles">optimization principles</a> section, storage gas has by far the largest effect on base gas. For background on the Aptos gas model, see <a href="https://aptoslabs.medium.com/the-making-of-the-aptos-gas-schedule-508d5686a350" target="_blank" rel="noopener noreferrer">The Making of the Aptos Gas Schedule</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_pM13" id="instruction-gas">Instruction gas<a href="#instruction-gas" class="hash-link" aria-label="Instruction gas への直接リンク" title="Instruction gas への直接リンク">​</a></h2>
<p>Basic instruction gas parameters are defined at <a href="https://github.com/aptos-labs/aptos-core/blob/main/aptos-move/aptos-gas-schedule/src/gas_schedule/instr.rs" target="_blank" rel="noopener noreferrer"><code>instr.rs</code></a> and include the following instruction types:</p>
<h3 class="anchor anchorWithStickyNavbar_pM13" id="no-operation">No-operation<a href="#no-operation" class="hash-link" aria-label="No-operation への直接リンク" title="No-operation への直接リンク">​</a></h3>
<table><thead><tr><th>Parameter</th><th>Meaning</th></tr></thead><tbody><tr><td><code>nop</code></td><td>A no-operation</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_pM13" id="control-flow">Control flow<a href="#control-flow" class="hash-link" aria-label="Control flow への直接リンク" title="Control flow への直接リンク">​</a></h3>
<table><thead><tr><th>Parameter</th><th>Meaning</th></tr></thead><tbody><tr><td><code>ret</code></td><td>Return</td></tr><tr><td><code>abort</code></td><td>Abort</td></tr><tr><td><code>br_true</code></td><td>Execute conditional true branch</td></tr><tr><td><code>br_false</code></td><td>Execute conditional false branch</td></tr><tr><td><code>branch</code></td><td>Branch</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_pM13" id="stack">Stack<a href="#stack" class="hash-link" aria-label="Stack への直接リンク" title="Stack への直接リンク">​</a></h3>
<table><thead><tr><th>Parameter</th><th>Meaning</th></tr></thead><tbody><tr><td><code>pop</code></td><td>Pop from stack</td></tr><tr><td><code>ld_u8</code></td><td>Load a <code>u8</code></td></tr><tr><td><code>ld_u16</code></td><td>Load a <code>u16</code></td></tr><tr><td><code>ld_u32</code></td><td>Load a <code>u32</code></td></tr><tr><td><code>ld_u64</code></td><td>Load a <code>u64</code></td></tr><tr><td><code>ld_u128</code></td><td>Load a <code>u128</code></td></tr><tr><td><code>ld_256</code></td><td>Load a <code>u256</code></td></tr><tr><td><code>ld_true</code></td><td>Load a <code>true</code></td></tr><tr><td><code>ld_false</code></td><td>Load a <code>false</code></td></tr><tr><td><code>ld_const_base</code></td><td>Base cost to load a constant</td></tr><tr><td><code>ld_const_per_byte</code></td><td>Per-byte cost to load a constant</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_pM13" id="local-scope">Local scope<a href="#local-scope" class="hash-link" aria-label="Local scope への直接リンク" title="Local scope への直接リンク">​</a></h3>
<table><thead><tr><th>Parameter</th><th>Meaning</th></tr></thead><tbody><tr><td><code>imm_borrow_loc</code></td><td>Immutably borrow</td></tr><tr><td><code>mut_borrow_loc</code></td><td>Mutably borrow</td></tr><tr><td><code>imm_borrow_field</code></td><td>Immutably borrow a field</td></tr><tr><td><code>mut_borrow_field</code></td><td>Mutably borrow a field</td></tr><tr><td><code>imm_borrow_field_generic</code></td><td></td></tr><tr><td><code>mut_borrow_field_generic</code></td><td></td></tr><tr><td><code>copy_loc_base</code></td><td>Base cost to copy</td></tr><tr><td><code>copy_loc_per_abs_val_unit</code></td><td></td></tr><tr><td><code>move_loc_base</code></td><td>Move</td></tr><tr><td><code>st_loc_base</code></td><td></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_pM13" id="calling">Calling<a href="#calling" class="hash-link" aria-label="Calling への直接リンク" title="Calling への直接リンク">​</a></h3>
<table><thead><tr><th>Parameter</th><th>Meaning</th></tr></thead><tbody><tr><td><code>call_base</code></td><td>Base cost for a function call</td></tr><tr><td><code>call_per_arg</code></td><td>Cost per function argument</td></tr><tr><td><code>call_per_local</code></td><td>Cost per local argument</td></tr><tr><td><code>call_generic_base</code></td><td></td></tr><tr><td><code>call_generic_per_ty_arg</code></td><td>Cost per type argument</td></tr><tr><td><code>call_generic_per_arg</code></td><td></td></tr><tr><td><code>call_generic_per_local</code></td><td>Cost generic per local argument</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_pM13" id="structs">Structs<a href="#structs" class="hash-link" aria-label="Structs への直接リンク" title="Structs への直接リンク">​</a></h3>
<table><thead><tr><th>Parameter</th><th>Meaning</th></tr></thead><tbody><tr><td><code>pack_base</code></td><td>Base cost to pack a <code>struct</code></td></tr><tr><td><code>pack_per_field</code></td><td>Cost to pack a <code>struct</code>, per field</td></tr><tr><td><code>pack_generic_base</code></td><td></td></tr><tr><td><code>pack_generic_per_field</code></td><td></td></tr><tr><td><code>unpack_base</code></td><td>Base cost to unpack a <code>struct</code></td></tr><tr><td><code>unpack_per_field</code></td><td>Cost to unpack a <code>struct</code>, per field</td></tr><tr><td><code>unpack_generic_base</code></td><td></td></tr><tr><td><code>unpack_generic_per_field</code></td><td></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_pM13" id="references">References<a href="#references" class="hash-link" aria-label="References への直接リンク" title="References への直接リンク">​</a></h3>
<table><thead><tr><th>Parameter</th><th>Meaning</th></tr></thead><tbody><tr><td><code>read_ref_base</code></td><td>Base cost to read from a reference</td></tr><tr><td><code>read_ref_per_abs_val_unit</code></td><td></td></tr><tr><td><code>write_ref_base</code></td><td>Base cost to write to a reference</td></tr><tr><td><code>freeze_ref</code></td><td>Freeze a reference</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_pM13" id="casting">Casting<a href="#casting" class="hash-link" aria-label="Casting への直接リンク" title="Casting への直接リンク">​</a></h3>
<table><thead><tr><th>Parameter</th><th>Meaning</th></tr></thead><tbody><tr><td><code>cast_u8</code></td><td>Cast to a <code>u8</code></td></tr><tr><td><code>cast_u16</code></td><td>Cast to a <code>u16</code></td></tr><tr><td><code>cast_u32</code></td><td>Cast to a <code>u32</code></td></tr><tr><td><code>cast_u64</code></td><td>Cast to a <code>u64</code></td></tr><tr><td><code>cast_u128</code></td><td>Cast to a <code>u128</code></td></tr><tr><td><code>cast_u256</code></td><td>Cast to a <code>u256</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_pM13" id="arithmetic">Arithmetic<a href="#arithmetic" class="hash-link" aria-label="Arithmetic への直接リンク" title="Arithmetic への直接リンク">​</a></h3>
<table><thead><tr><th>Parameter</th><th>Meaning</th></tr></thead><tbody><tr><td><code>add</code></td><td>Add</td></tr><tr><td><code>sub</code></td><td>Subtract</td></tr><tr><td><code>mul</code></td><td>Multiply</td></tr><tr><td><code>mod_</code></td><td>Modulo</td></tr><tr><td><code>div</code></td><td>Divide</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_pM13" id="bitwise">Bitwise<a href="#bitwise" class="hash-link" aria-label="Bitwise への直接リンク" title="Bitwise への直接リンク">​</a></h3>
<table><thead><tr><th>Parameter</th><th>Meaning</th></tr></thead><tbody><tr><td><code>bit_or</code></td><td><code>OR</code>: <code>|</code></td></tr><tr><td><code>bit_and</code></td><td><code>AND</code>: <code>&amp;</code></td></tr><tr><td><code>xor</code></td><td><code>XOR</code>: <code>^</code></td></tr><tr><td><code>shl</code></td><td>Shift left: <code>&lt;&lt;</code></td></tr><tr><td><code>shr</code></td><td>Shift right: <code>&gt;&gt;</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_pM13" id="boolean">Boolean<a href="#boolean" class="hash-link" aria-label="Boolean への直接リンク" title="Boolean への直接リンク">​</a></h3>
<table><thead><tr><th>Parameter</th><th>Meaning</th></tr></thead><tbody><tr><td><code>or</code></td><td><code>OR</code>: <code>||</code></td></tr><tr><td><code>and</code></td><td><code>AND</code>: <code>&amp;&amp;</code></td></tr><tr><td><code>not</code></td><td><code>NOT</code>: <code>!</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_pM13" id="comparison">Comparison<a href="#comparison" class="hash-link" aria-label="Comparison への直接リンク" title="Comparison への直接リンク">​</a></h3>
<table><thead><tr><th>Parameter</th><th>Meaning</th></tr></thead><tbody><tr><td><code>lt</code></td><td>Less than: <code>&lt;</code></td></tr><tr><td><code>gt</code></td><td>Greater than: <code>&gt;</code></td></tr><tr><td><code>le</code></td><td>Less than or equal to: <code>&lt;=</code></td></tr><tr><td><code>ge</code></td><td>Greater than or equal to: <code>&gt;=</code></td></tr><tr><td><code>eq_base</code></td><td>Base equality cost: <code>==</code></td></tr><tr><td><code>eq_per_abs_val_unit</code></td><td></td></tr><tr><td><code>neq_base</code></td><td>Base not equal cost: <code>!=</code></td></tr><tr><td><code>neq_per_abs_val_unit</code></td><td></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_pM13" id="global-storage">Global storage<a href="#global-storage" class="hash-link" aria-label="Global storage への直接リンク" title="Global storage への直接リンク">​</a></h3>
<table><thead><tr><th>Parameter</th><th>Meaning</th></tr></thead><tbody><tr><td><code>imm_borrow_global_base</code></td><td>Base cost to immutably borrow: <code>borrow_global&lt;T&gt;()</code></td></tr><tr><td><code>imm_borrow_global_generic_base</code></td><td></td></tr><tr><td><code>mut_borrow_global_base</code></td><td>Base cost to mutably borrow: <code>borrow_global_mut&lt;T&gt;()</code></td></tr><tr><td><code>mut_borrow_global_generic_base</code></td><td></td></tr><tr><td><code>exists_base</code></td><td>Base cost to check existence: <code>exists&lt;T&gt;()</code></td></tr><tr><td><code>exists_generic_base</code></td><td></td></tr><tr><td><code>move_from_base</code></td><td>Base cost to move from: <code>move_from&lt;T&gt;()</code></td></tr><tr><td><code>move_from_generic_base</code></td><td></td></tr><tr><td><code>move_to_base</code></td><td>Base cost to move to: <code>move_to&lt;T&gt;()</code></td></tr><tr><td><code>move_to_generic_base</code></td><td></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_pM13" id="vectors">Vectors<a href="#vectors" class="hash-link" aria-label="Vectors への直接リンク" title="Vectors への直接リンク">​</a></h3>
<table><thead><tr><th>Parameter</th><th>Meaning</th></tr></thead><tbody><tr><td><code>vec_len_base</code></td><td>Length of a vector</td></tr><tr><td><code>vec_imm_borrow_base</code></td><td>Immutably borrow an element</td></tr><tr><td><code>vec_mut_borrow_base</code></td><td>Mutably borrow an element</td></tr><tr><td><code>vec_push_back_base</code></td><td>Push back</td></tr><tr><td><code>vec_pop_back_base</code></td><td>Pop from the back</td></tr><tr><td><code>vec_swap_base</code></td><td>Swap elements</td></tr><tr><td><code>vec_pack_base</code></td><td>Base cost to pack a vector</td></tr><tr><td><code>vec_pack_per_elem</code></td><td>Cost to pack a vector per element</td></tr><tr><td><code>vec_unpack_base</code></td><td>Base cost to unpack a vector</td></tr><tr><td><code>vec_unpack_per_expected_elem</code></td><td>Base cost to unpack a vector per element</td></tr></tbody></table>
<p>Additional storage gas parameters are defined in <a href="https://github.com/aptos-labs/aptos-core/blob/main/aptos-move/aptos-gas-schedule/src/gas_schedule/table.rs" target="_blank" rel="noopener noreferrer"><code>table.rs</code></a>, <a href="https://github.com/aptos-labs/aptos-core/blob/main/aptos-move/aptos-gas-schedule/src/gas_schedule/move_stdlib.rs" target="_blank" rel="noopener noreferrer"><code>move_stdlib.rs</code></a>, and other assorted source files in <a href="https://github.com/aptos-labs/aptos-core/blob/main/aptos-move/aptos-gas-schedule/src" target="_blank" rel="noopener noreferrer"><code>aptos-gas-schedule/src/</code></a>.</p>
<h2 class="anchor anchorWithStickyNavbar_pM13" id="io-and-storage-charges">IO and Storage charges<a href="#io-and-storage-charges" class="hash-link" aria-label="IO and Storage charges への直接リンク" title="IO and Storage charges への直接リンク">​</a></h2>
<p>The following gas parameters are applied (i.e., charged) to represent the costs associated with transient storage device resources, including disk IOPS and bandwidth:</p>
<table><thead><tr><th>Parameter</th><th>Meaning</th></tr></thead><tbody><tr><td>storage_io_per_state_slot_write</td><td>charged per state write operation in the transaction output</td></tr><tr><td>storage_io_per_state_byte_write</td><td>charged per byte in all state write ops in the transaction output</td></tr><tr><td>storage_io_per_state_slot_read</td><td>charged per item loaded from global state</td></tr><tr><td>storage_io_per_state_byte_read</td><td>charged per byte loaded from global state</td></tr></tbody></table>
<p>The following storage fee parameters are applied (i.e., charged in absolute APT values) to represent the disk space and structural costs associated with using the <a href="/reference/glossary#merkle-trees">Aptos authenticated data structure</a> for storing items on the blockchain. This encompasses actions such as creating things in the global state, emitting events, and similar operations:</p>
<table><thead><tr><th>Parameter</th><th>Meaning</th></tr></thead><tbody><tr><td>free_write_bytes_quota</td><td>1KB (configurable) free bytes per state slot. (<em>Subject to short-term change.</em>)</td></tr><tr><td>free_event_bytes_quota</td><td>1KB (configurable) free event bytes per transaction. (<em>Subject to short-term change.</em>)</td></tr><tr><td>storage_fee_per_state_slot_create</td><td>allocating a state slot, by <code>move_to()</code>, <code>table::add()</code>, etc</td></tr><tr><td>storage_fee_per_excess_state_byte</td><td>per byte beyond <code>free_write_bytes_quota</code> per state slot. Notice this is charged every time the slot is written to, not only at allocation time.</td></tr><tr><td>storage_fee_per_event_byte</td><td>per byte beyond <code>free_event_bytes_quota</code> per transaction.</td></tr><tr><td>storage_fee_per_transaction_byte</td><td>each transaction byte beyond <code>large_transaction_cutoff</code>. (search in the page)</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_pM13" id="vectors-1">Vectors<a href="#vectors-1" class="hash-link" aria-label="Vectors への直接リンク" title="Vectors への直接リンク">​</a></h3>
<p>Byte-wise fees are similarly assessed on vectors, which consume <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msubsup><msub><mi>e</mi><mi>i</mi></msub><mo>+</mo><mi>b</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sum_{i = 0}^{n - 1} e_i + b(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2537em;vertical-align:-0.2997em"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.954em"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">b</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> bytes, where:</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">n</span></span></span></span> is the number of elements in the vector</li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>e</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">e_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span> is the size of element <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em"></span><span class="mord mathnormal">i</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">b(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">b</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> is a &quot;base size&quot; which is a function of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">n</span></span></span></span></li>
</ul>
<p>See the <a href="https://github.com/diem/bcs#fixed-and-variable-length-sequences" target="_blank" rel="noopener noreferrer">BCS sequence specification</a> for more information on vector base size (technically a <code>ULEB128</code>), which typically occupies just one byte in practice, such that a vector of 100 <code>u8</code> elements accounts for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mo>+</mo><mn>1</mn><mo>=</mo><mn>101</mn></mrow><annotation encoding="application/x-tex">100 + 1 = 101</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">100</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">101</span></span></span></span> bytes.
Hence, per the item-wise read methodology described above, reading the last element of such a vector is treated as a 101-byte read.</p>
<h2 class="anchor anchorWithStickyNavbar_pM13" id="payload-gas">Payload gas<a href="#payload-gas" class="hash-link" aria-label="Payload gas への直接リンク" title="Payload gas への直接リンク">​</a></h2>
<p>Payload gas is defined in <a href="https://github.com/aptos-labs/aptos-core/blob/main/aptos-move/aptos-gas-schedule/src/gas_schedule/transaction.rs" target="_blank" rel="noopener noreferrer"><code>transaction.rs</code></a>, which incorporates storage gas with several payload- and pricing-associated parameters:</p>
<table><thead><tr><th>Parameter</th><th>Meaning</th></tr></thead><tbody><tr><td><code>min_transaction_gas_units</code></td><td>Minimum internal gas units for a transaction, charged at the start of execution</td></tr><tr><td><code>large_transaction_cutoff</code></td><td>Size, in bytes, above which transactions will be charged an additional amount per byte</td></tr><tr><td><code>intrinsic_gas_per_byte</code></td><td>Internal gas units charged per byte for payloads above <code>large_transaction_cutoff</code></td></tr><tr><td><code>maximum_number_of_gas_units</code></td><td>Upper limit on external gas units for a transaction</td></tr><tr><td><code>min_price_per_gas_unit</code></td><td>Minimum gas price allowed for a transaction</td></tr><tr><td><code>max_price_per_gas_unit</code></td><td>Maximum gas price allowed for a transaction</td></tr><tr><td><code>max_transaction_size_in_bytes</code></td><td>Maximum transaction payload size in bytes</td></tr><tr><td><code>gas_unit_scaling_factor</code></td><td>Conversion factor between internal gas units and external gas units</td></tr></tbody></table>
<p>Here, &quot;internal gas units&quot; are defined as constants in source files like <a href="https://github.com/aptos-labs/aptos-core/blob/main/aptos-move/aptos-gas-schedule/src/gas_schedule/instr.rs" target="_blank" rel="noopener noreferrer"><code>instr.rs</code></a> and <a href="https://github.com/aptos-labs/aptos-core/blob/main/aptos-move/framework/aptos-framework/sources/storage_gas.move" target="_blank" rel="noopener noreferrer"><code>storage_gas.move</code></a>, which are more granular than &quot;external gas units&quot; by a factor of <code>gas_unit_scaling_factor</code>:
to convert from internal gas units to external gas units, divide by <code>gas_unit_scaling_factor</code>.
Then, to convert from external gas units to octas, multiply by the &quot;gas price&quot;, which denotes the number of octas per unit of external gas.</p>
<h2 class="anchor anchorWithStickyNavbar_pM13" id="optimization-principles">Optimization principles<a href="#optimization-principles" class="hash-link" aria-label="Optimization principles への直接リンク" title="Optimization principles への直接リンク">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_pM13" id="unit-and-pricing-constants">Unit and pricing constants<a href="#unit-and-pricing-constants" class="hash-link" aria-label="Unit and pricing constants への直接リンク" title="Unit and pricing constants への直接リンク">​</a></h3>
<p>As of the time of this writing, <code>min_price_per_gas_unit</code> in <a href="https://github.com/aptos-labs/aptos-core/blob/main/aptos-move/aptos-gas-schedule/src/gas_schedule/transaction.rs" target="_blank" rel="noopener noreferrer"><code>transaction.rs</code></a> is defined as <a href="https://github.com/aptos-labs/aptos-core/blob/main/config/global-constants/src/lib.rs" target="_blank" rel="noopener noreferrer"><code>aptos_global_constants</code></a><code>::GAS_UNIT_PRICE</code> (which is itself defined as 100), with other noteworthy <a href="https://github.com/aptos-labs/aptos-core/blob/main/aptos-move/aptos-gas-schedule/src/gas_schedule/transaction.rs" target="_blank" rel="noopener noreferrer"><code>transaction.rs</code></a> constants as follows:</p>
<table><thead><tr><th>Constant</th><th>Value</th></tr></thead><tbody><tr><td><code>min_price_per_gas_unit</code></td><td>100</td></tr><tr><td><code>max_price_per_gas_unit</code></td><td>10,000,000,000</td></tr><tr><td><code>gas_unit_scaling_factor</code></td><td>1,000,000</td></tr></tbody></table>
<p>See <a href="#payload-gas">Payload gas</a> for the meaning of these constants.</p>
<h3 class="anchor anchorWithStickyNavbar_pM13" id="storage-fee">Storage Fee<a href="#storage-fee" class="hash-link" aria-label="Storage Fee への直接リンク" title="Storage Fee への直接リンク">​</a></h3>
<p>When the network load is low, the gas unit price is expected to be low, making most aspects of the transaction cost more affordable. However, the storage fee is an exception, as it&#x27;s priced in terms of absolute APT value. In most instances, the transaction fee is the predominant component of the overall transaction cost. This is especially true when a transaction allocates state slots, writes to sizable state items, emits numerous or large events, or when the transaction itself is a large one. All of these factors consume disk space on Aptos nodes and are charged accordingly.</p>
<p>On the other hand, the storage refund incentivizes releasing state slots by deleting state items. The state slot fee is fully refunded upon slot deallocation, while the excess state byte fee is non-refundable. This will soon change by differentiating between permanent bytes (those in the global state) and relative ephemeral bytes (those that traverse the ledger history).</p>
<p>Some cost optimization strategies concerning the storage fee:</p>
<ol>
<li>Minimize state item creation.</li>
<li>Minimize event emissions.</li>
<li>Avoid large state items, events, and transactions.</li>
<li>Clean up state items that are no longer in use.</li>
<li>If two fields are consistently updated together, group them into the same resource or resource group.</li>
<li>If a struct is large and only a few fields are updated frequently, move those fields to a separate resource or resource group.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_pM13" id="instruction-gas-1">Instruction gas<a href="#instruction-gas-1" class="hash-link" aria-label="Instruction gas への直接リンク" title="Instruction gas への直接リンク">​</a></h3>
<p>As of the time of this writing, all instruction gas operations are multiplied by the <code>EXECUTION_GAS_MULTIPLIER</code> defined in <a href="https://github.com/aptos-labs/aptos-core/blob/main/aptos-move/aptos-gas-meter/src/meter.rs" target="_blank" rel="noopener noreferrer"><code>meter.rs</code></a>, which is set to 20.
Hence, the following representative operations assume gas costs as follows (divide internal gas by scaling factor, then multiply by minimum gas price):</p>
<table><thead><tr><th>Operation</th><th>Minimum Octas</th></tr></thead><tbody><tr><td>Table add/borrow/remove box</td><td>240</td></tr><tr><td>Function call</td><td>200</td></tr><tr><td>Load constant</td><td>130</td></tr><tr><td>Globally borrow</td><td>100</td></tr><tr><td>Read/write reference</td><td>40</td></tr><tr><td>Load <code>u128</code> on stack</td><td>16</td></tr><tr><td>Table box operation per byte</td><td>2</td></tr></tbody></table>
<p>(Note that per-byte table box operation instruction gas does not account for storage gas, which is assessed separately).</p>
<p>For comparison, reading a 100-byte item costs <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mi>i</mi></msub><mo>+</mo><mn>100</mn><mo>∗</mo><msub><mi>r</mi><mi>b</mi></msub><mo>=</mo><mn>3000</mn><mo>+</mo><mn>100</mn><mo>∗</mo><mn>3</mn><mo>=</mo><mn>3300</mn></mrow><annotation encoding="application/x-tex">r_i + 100 * r_b = 3000 + 100 * 3 = 3300</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">100</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">3000</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">100</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">3300</span></span></span></span> octas at minimum, some 16.5 times as much as a function call, and in general, instruction gas costs are largely dominated by storage gas costs.</p>
<p>Notably, however, there is still technically an incentive to reduce the number of function calls in a program, but engineering efforts are more effectively dedicated to writing modular, decomposed code that is geared toward reducing storage gas costs, rather than attempting to write repetitive code blocks with fewer nested functions (in nearly all cases).</p>
<p>In extreme cases it is possible for instruction gas to far outweigh storage gas, for example if a looping mathematical function takes 10,000 iterations to converge; but again this is an extreme case and for most applications storage gas has a larger impact on base gas than does instruction gas.</p>
<h3 class="anchor anchorWithStickyNavbar_pM13" id="payload-gas-1">Payload gas<a href="#payload-gas-1" class="hash-link" aria-label="Payload gas への直接リンク" title="Payload gas への直接リンク">​</a></h3>
<p>As of the time of this writing, <a href="https://github.com/aptos-labs/aptos-core/blob/main/aptos-move/aptos-gas-schedule/src/gas_schedule/transaction.rs" target="_blank" rel="noopener noreferrer"><code>transaction/mod.rs</code></a> defines the minimum amount of internal gas per transaction as 1,500,000 internal units (15,000 octas at minimum), an amount that increases by 2,000 internal gas units (20 octas minimum) per byte for payloads larger than 600 bytes, with the maximum number of bytes permitted in a transaction set at 65536.
Hence, in practice, payload gas is unlikely to be a concern.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/aptos-labs/developer-docs/edit/main/apps/docusaurus/docs/concepts/base-gas.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_l3kn" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>このページを編集</a></div><div class="col lastUpdated_nZMy"><span class="theme-last-updated"><b><time datetime="2024-04-16T14:16:34.000Z">2024年4月16日</time></b>に<!-- -->最終更新</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="ドキュメントページ"><a class="pagination-nav__link pagination-nav__link--prev" href="/concepts/gas-txn-fee"><div class="pagination-nav__sublabel">前へ</div><div class="pagination-nav__label">Gas and Storage Fees</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/concepts/blocks"><div class="pagination-nav__sublabel">次へ</div><div class="pagination-nav__label">Blocks</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_HHZg thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#instruction-gas" class="table-of-contents__link toc-highlight">Instruction gas</a><ul><li><a href="#no-operation" class="table-of-contents__link toc-highlight">No-operation</a></li><li><a href="#control-flow" class="table-of-contents__link toc-highlight">Control flow</a></li><li><a href="#stack" class="table-of-contents__link toc-highlight">Stack</a></li><li><a href="#local-scope" class="table-of-contents__link toc-highlight">Local scope</a></li><li><a href="#calling" class="table-of-contents__link toc-highlight">Calling</a></li><li><a href="#structs" class="table-of-contents__link toc-highlight">Structs</a></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li><li><a href="#casting" class="table-of-contents__link toc-highlight">Casting</a></li><li><a href="#arithmetic" class="table-of-contents__link toc-highlight">Arithmetic</a></li><li><a href="#bitwise" class="table-of-contents__link toc-highlight">Bitwise</a></li><li><a href="#boolean" class="table-of-contents__link toc-highlight">Boolean</a></li><li><a href="#comparison" class="table-of-contents__link toc-highlight">Comparison</a></li><li><a href="#global-storage" class="table-of-contents__link toc-highlight">Global storage</a></li><li><a href="#vectors" class="table-of-contents__link toc-highlight">Vectors</a></li></ul></li><li><a href="#io-and-storage-charges" class="table-of-contents__link toc-highlight">IO and Storage charges</a><ul><li><a href="#vectors-1" class="table-of-contents__link toc-highlight">Vectors</a></li></ul></li><li><a href="#payload-gas" class="table-of-contents__link toc-highlight">Payload gas</a></li><li><a href="#optimization-principles" class="table-of-contents__link toc-highlight">Optimization principles</a><ul><li><a href="#unit-and-pricing-constants" class="table-of-contents__link toc-highlight">Unit and pricing constants</a></li><li><a href="#storage-fee" class="table-of-contents__link toc-highlight">Storage Fee</a></li><li><a href="#instruction-gas-1" class="table-of-contents__link toc-highlight">Instruction gas</a></li><li><a href="#payload-gas-1" class="table-of-contents__link toc-highlight">Payload gas</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item">
                <div class="footer-left">
                  <a class="footer-logo" href="https://aptosfoundation.org" target="_blank" rel="noopener noreferrer" title="Aptos Foundation">
                    <svg width="100%" height="100%" version="1.2" baseProfile="tiny" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 112 112" overflow="visible" xml:space="preserve"><path fill="currentColor" d="M86.6 37.4h-9.9c-1.1 0-2.2-.5-3-1.3l-4-4.5c-1.2-1.3-3.1-1.4-4.5-.3l-.3.3-3.4 3.9c-1.1 1.3-2.8 2-4.5 2H2.9C1.4 41.9.4 46.6 0 51.3h51.2c.9 0 1.8-.4 2.4-1l4.8-5c.6-.6 1.4-1 2.3-1h.2c.9 0 1.8.4 2.4 1.1l4 4.5c.8.9 1.9 1.4 3 1.4H112c-.4-4.7-1.4-9.4-2.9-13.8H86.6zM53.8 65l-4-4.5c-1.2-1.3-3.1-1.4-4.5-.3l-.3.3-3.5 3.9c-1.1 1.3-2.7 2-4.4 2H.8c.9 4.8 2.5 9.5 4.6 14h25.5c.9 0 1.7-.4 2.4-1l4.8-5c.6-.6 1.4-1 2.3-1h.2c.9 0 1.8.4 2.4 1.1l4 4.5c.8.9 1.9 1.4 3 1.4h56.6c2.1-4.4 3.7-9.1 4.6-14H56.8c-1.2 0-2.3-.5-3-1.4zm19.6-43.6 4.8-5c.6-.6 1.4-1 2.3-1h.2c.9 0 1.8.4 2.4 1l4 4.5c.8.9 1.9 1.3 3 1.3h10.8c-18.8-24.8-54.1-29.7-79-11-4.1 3.1-7.8 6.8-11 11H71c1 .2 1.8-.2 2.4-.8zM34.7 94.2c-1.2 0-2.3-.5-3-1.3l-4-4.5c-1.2-1.3-3.2-1.4-4.5-.2l-.2.2-3.5 3.9c-1.1 1.3-2.7 2-4.4 2h-.2C36 116.9 71.7 118 94.4 96.7c.9-.8 1.7-1.7 2.6-2.6H34.7z"/></svg>
                  </a>
                  <div class="copyright">
                    <p class="copyright-text">© 2024 Aptos Foundation</p>
                    <div class="copyright-links">
                      <a href="https://aptosfoundation.org/privacy" target="_blank">Privacy</a>
                      <a href="https://aptosfoundation.org/terms" target="_blank">Terms</a></div>
                  </div>
                </div>
                </li></ul></div><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item">
                  <p class="right">
                    <nav class="social-links">
                        <a class="social-link" href="https://github.com/aptos-labs/developer-docs" target="_blank" rel="noopener noreferrer" title="Github">
                         <svg width="100%" height="100%" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10 0C4.47514 0 0 4.47514 0 10C0 14.4199 2.86679 18.1645 6.83855 19.4905C7.33579 19.5826 7.51995 19.2756 7.51995 19.0055C7.51995 18.7661 7.51381 18.14 7.50767 17.3051C4.72683 17.9067 4.13751 15.9668 4.13751 15.9668C3.68324 14.8128 3.0264 14.5058 3.0264 14.5058C2.11786 13.8858 3.09392 13.8981 3.09392 13.8981C4.09454 13.9718 4.62861 14.9294 4.62861 14.9294C5.51872 16.4579 6.96746 16.016 7.53837 15.7581C7.63045 15.1136 7.88827 14.6716 8.17066 14.4199C5.94843 14.1682 3.61571 13.3088 3.61571 9.47821C3.61571 8.38551 4.00246 7.4954 4.64702 6.79558C4.54266 6.54389 4.19889 5.52486 4.74524 4.14978C4.74524 4.14978 5.58625 3.87968 7.4954 5.17495C8.29343 4.95396 9.14672 4.84346 10 4.83732C10.8471 4.83732 11.7066 4.95396 12.5046 5.17495C14.4137 3.87968 15.2548 4.14978 15.2548 4.14978C15.8011 5.52486 15.4573 6.54389 15.353 6.79558C15.9914 7.4954 16.3781 8.38551 16.3781 9.47821C16.3781 13.3211 14.0393 14.1621 11.8109 14.4137C12.167 14.7207 12.4923 15.3346 12.4923 16.2676C12.4923 17.6059 12.48 18.6802 12.48 19.0117C12.48 19.2818 12.6581 19.5887 13.1676 19.4905C17.1393 18.1645 20 14.4199 20 10.0061C20 4.47514 15.5249 0 10 0Z" fill="currentColor"/></svg>
                        </a>
                        <a class="social-link" href="https://discord.gg/aptosnetwork" target="_blank" rel="noopener noreferrer" title="Discord">
                          <svg width="100%" height="100%" viewBox="0 0 71 55" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#a)"><path d="M60.105 4.898A58.55 58.55 0 0 0 45.653.415a.22.22 0 0 0-.233.11 40.784 40.784 0 0 0-1.8 3.697c-5.456-.817-10.886-.817-16.23 0-.485-1.164-1.201-2.587-1.828-3.697a.228.228 0 0 0-.233-.11 58.386 58.386 0 0 0-14.451 4.483.207.207 0 0 0-.095.082C1.578 18.73-.944 32.144.293 45.39a.244.244 0 0 0 .093.167c6.073 4.46 11.955 7.167 17.729 8.962a.23.23 0 0 0 .249-.082 42.08 42.08 0 0 0 3.627-5.9.225.225 0 0 0-.123-.312 38.772 38.772 0 0 1-5.539-2.64.228.228 0 0 1-.022-.378 31.17 31.17 0 0 0 1.1-.862.22.22 0 0 1 .23-.03c11.619 5.304 24.198 5.304 35.68 0a.219.219 0 0 1 .233.027c.356.293.728.586 1.103.865a.228.228 0 0 1-.02.378 36.384 36.384 0 0 1-5.54 2.637.227.227 0 0 0-.121.315 47.249 47.249 0 0 0 3.624 5.897.225.225 0 0 0 .249.084c5.801-1.794 11.684-4.502 17.757-8.961a.228.228 0 0 0 .092-.164c1.48-15.315-2.48-28.618-10.497-40.412a.18.18 0 0 0-.093-.084Zm-36.38 32.427c-3.497 0-6.38-3.211-6.38-7.156 0-3.944 2.827-7.156 6.38-7.156 3.583 0 6.438 3.24 6.382 7.156 0 3.945-2.827 7.156-6.381 7.156Zm23.593 0c-3.498 0-6.38-3.211-6.38-7.156 0-3.944 2.826-7.156 6.38-7.156 3.582 0 6.437 3.24 6.38 7.156 0 3.945-2.798 7.156-6.38 7.156Z" fill="currentColor"/></g><defs><clipPath id="a"><path fill="currentColor" d="M0 0h71v55H0z"/></clipPath></defs></svg>
                        </a>
                        <a class="social-link" href="https://twitter.com/Aptos" target="_blank" rel="noopener noreferrer" title="Twitter">
                          <svg width="100%" height="100%" viewBox="0 0 22 17" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M22 2.013a9.395 9.395 0 0 1-2.593.676A4.348 4.348 0 0 0 21.392.314a9.341 9.341 0 0 1-2.866 1.042A4.62 4.62 0 0 0 15.232 0c-2.493 0-4.514 1.922-4.514 4.292 0 .336.04.664.117.978C7.083 5.09 3.758 3.382 1.532.786A4.115 4.115 0 0 0 .92 2.944c0 1.489.796 2.802 2.007 3.571A4.669 4.669 0 0 1 .884 5.98v.053c0 2.08 1.555 3.815 3.62 4.209a4.744 4.744 0 0 1-2.038.074c.574 1.705 2.241 2.945 4.216 2.98a9.358 9.358 0 0 1-5.605 1.837c-.365 0-.724-.02-1.077-.06A13.257 13.257 0 0 0 6.918 17c8.303 0 12.843-6.54 12.843-12.21 0-.187-.004-.372-.013-.556A8.929 8.929 0 0 0 22 2.013Z" fill="currentColor"/></svg>
                        </a>
                    </nav>
                  </p>
              </li></ul></div></div></div></footer></div>
</body>
</html>