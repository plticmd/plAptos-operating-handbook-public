"use strict";(self.webpackChunkaptos_docs=self.webpackChunkaptos_docs||[]).push([[8419],{65857:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>p,frontMatter:()=>s,metadata:()=>a,toc:()=>d});var t=i(63159),o=i(83581);const s={title:"Node Inspection Service"},r=void 0,a={id:"nodes/measure/node-inspection-service",title:"Node Inspection Service",description:"Aptos nodes collect metrics and system information while running. These metrics provide a way to track,",source:"@site/i18n/ja/docusaurus-plugin-content-docs/current/nodes/measure/node-inspection-service.md",sourceDirName:"nodes/measure",slug:"/nodes/measure/node-inspection-service",permalink:"/nodes/measure/node-inspection-service",draft:!1,unlisted:!1,editUrl:"https://github.com/aptos-labs/developer-docs/edit/main/apps/docusaurus/docs/nodes/measure/node-inspection-service.md",tags:[],version:"current",lastUpdatedAt:1713276994,formattedLastUpdatedAt:"2024\u5e744\u670816\u65e5",frontMatter:{title:"Node Inspection Service"},sidebar:"nodeSidebar",previous:{title:"Monitor your Nodes",permalink:"/nodes/measure/measure-index"},next:{title:"Important Node Metrics",permalink:"/nodes/measure/important-metrics"}},c={},d=[{value:"Examining node metrics",id:"examining-node-metrics",level:2},{value:"Change inspection service port",id:"change-inspection-service-port",level:2},{value:"Expose system configuration",id:"expose-system-configuration",level:2},{value:"Expose system information",id:"expose-system-information",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["Aptos nodes collect metrics and system information while running. These metrics provide a way to track,\nmonitor and inspect the health and performance of the node dynamically, at runtime. Node metrics and system\ninformation can be queried or exported via an inspection service that runs on each node.\nTo see the list of important metrics and counters, see the ",(0,t.jsx)(n.a,{href:"/nodes/measure/important-metrics",children:"Important Node Metrics"})," document."]}),"\n",(0,t.jsx)(n.p,{children:"You can configure various aspects of the node inspection service. This document describes how to expose and see the metrics locally, on the respective node. You may also view these metrics remotely by making the port accessible via firewall rules."}),"\n",(0,t.jsx)(n.admonition,{type:"danger",children:(0,t.jsx)(n.p,{children:"If you do make the inspection service port publicly accessible on your node, we\nrecommend disabling access when not in use (to prevent unauthorized access and abuse)."})}),"\n",(0,t.jsx)(n.h2,{id:"examining-node-metrics",children:"Examining node metrics"}),"\n",(0,t.jsx)(n.p,{children:"If you'd like to examine the metrics of your node, start running a\nnode and review the inspection service locally by loading this URL in your browser:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"http://localhost:9101/metrics\n"})}),"\n",(0,t.jsx)(n.p,{children:"This will display the values of all the metrics and counters of your node at the time you queried it.\nTo see updates to these values, simply refresh the page."}),"\n",(0,t.jsxs)(n.p,{children:["Likewise, if you wish to view the metrics in ",(0,t.jsx)(n.code,{children:"json"})," format, visit the following URL:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"http://localhost:9101/json_metrics\n"})}),"\n",(0,t.jsx)(n.admonition,{title:"Inspection service configuration",type:"tip",children:(0,t.jsx)(n.p,{children:"See additional configuration\ndetails below."})}),"\n",(0,t.jsx)(n.h2,{id:"change-inspection-service-port",children:"Change inspection service port"}),"\n",(0,t.jsxs)(n.p,{children:["The inspection service should run on all nodes by default, at port ",(0,t.jsx)(n.code,{children:"9101"}),". To change\nthe port the inspection service listens on (e.g., to ",(0,t.jsx)(n.code,{children:"1000"}),"), add the following to your node\nconfiguration file:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"inspection_service:\n  port: 1000\n"})}),"\n",(0,t.jsx)(n.h2,{id:"expose-system-configuration",children:"Expose system configuration"}),"\n",(0,t.jsx)(n.p,{children:"The inspection service also provides a way to examine the configuration of your node\nat runtime (i.e., the configuration settings that your node started with)."}),"\n",(0,t.jsx)(n.admonition,{title:"Proceed with caution",type:"caution",children:(0,t.jsx)(n.p,{children:"By default, the configuration endpoint is disabled as it may expose potentially sensitive\ninformation about the configuration of your node, e.g., file paths and directories. We\nrecommend enabling this endpoint only if the inspection service is not publicly accessible."})}),"\n",(0,t.jsx)(n.p,{children:"To enable this feature, add the following to your node configuration file:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"inspection_service:\n  expose_configuration: true\n"})}),"\n",(0,t.jsx)(n.p,{children:"And visit the configuration URL:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"http://localhost:9101/configuration\n"})}),"\n",(0,t.jsx)(n.h2,{id:"expose-system-information",children:"Expose system information"}),"\n",(0,t.jsx)(n.p,{children:"Likewise, the inspection service also provides a way to examine the system information of your node\nat runtime (i.e., build and hardware information). Simply visit the following URL:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"http://localhost:9101/system_information\n"})}),"\n",(0,t.jsx)(n.p,{children:"If you'd like to disable this endpoint, add the following to your node configuration file:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"inspection_service:\n  expose_system_information: false\n"})}),"\n",(0,t.jsx)(n.admonition,{title:"System information accuracy",type:"tip",children:(0,t.jsx)(n.p,{children:"The system information displayed here is not guaranteed to be 100% accurate due to limitations\nin the way this information is collected. As a result, we recommend not worrying about any\ninaccuracies and treating the information as an estimate."})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},83581:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>a});var t=i(11855);const o={},s=t.createContext(o);function r(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);