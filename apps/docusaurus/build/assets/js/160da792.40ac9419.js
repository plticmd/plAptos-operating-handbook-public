"use strict";(self.webpackChunkaptos_docs=self.webpackChunkaptos_docs||[]).push([[4763],{79707:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>u,frontMatter:()=>s,metadata:()=>a,toc:()=>l});var r=t(63159),o=t(83581);const s={title:"PFN Requirements"},i=void 0,a={id:"nodes/full-node/pfn-requirements",title:"PFN Requirements",description:"To ensure that your public fullnode (PFN) operates smoothly, it should meet the requirements specified in this document.",source:"@site/i18n/ja/docusaurus-plugin-content-docs/current/nodes/full-node/pfn-requirements.md",sourceDirName:"nodes/full-node",slug:"/nodes/full-node/pfn-requirements",permalink:"/nodes/full-node/pfn-requirements",draft:!1,unlisted:!1,editUrl:"https://github.com/aptos-labs/developer-docs/edit/main/apps/docusaurus/docs/nodes/full-node/pfn-requirements.md",tags:[],version:"current",lastUpdatedAt:1713276994,formattedLastUpdatedAt:"2024\u5e744\u670816\u65e5",frontMatter:{title:"PFN Requirements"},sidebar:"nodeSidebar",previous:{title:"Run a Public Fullnode",permalink:"/nodes/full-node/public-fullnode"},next:{title:"Deploy a PFN",permalink:"/nodes/full-node/deployments/deploy-a-pfn"}},d={},l=[{value:"Hardware requirements",id:"hardware-requirements",level:2},{value:"Network requirements and ports",id:"network-requirements-and-ports",level:2},{value:"Port settings",id:"port-settings",level:3},{value:"Running a PFN:",id:"running-a-pfn",level:4},{value:"Storage requirements",id:"storage-requirements",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"To ensure that your public fullnode (PFN) operates smoothly, it should meet the requirements specified in this document."}),"\n",(0,r.jsx)(n.h2,{id:"hardware-requirements",children:"Hardware requirements"}),"\n",(0,r.jsxs)(n.p,{children:["For running a production-grade PFN, we recommend that your hardware meet the same requirements as a\nvalidator or VFN. You can see the hardware requirements for these nodes, here: ",(0,r.jsx)(n.a,{href:"/nodes/validator-node/operator/node-requirements#hardware-requirements",children:"validator and VFN hardware requirements"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"If you wish to run a PFN for development or testing only, lower hardware specs can be used. But, it should not be\nused in production as it will experience degradation under load. Example lower hardware specs for a PFN are:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CPU"}),": 8 cores, 16 threads (Intel Xeon Skylake or newer)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Memory"}),": 32GB RAM."]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{title:"Minimum hardware requirements",type:"danger",children:(0,r.jsx)(n.p,{children:"Failing to meet the minimum hardware requirements for a production-grade PFN mean that your\nPFN will likely experience degradation under load and general instability in production environments."})}),"\n",(0,r.jsx)(n.h2,{id:"network-requirements-and-ports",children:"Network requirements and ports"}),"\n",(0,r.jsx)(n.p,{children:"When you are running a PFN, you are required to open network ports on your nodes to allow other nodes (i.e., peers)\nto connect to you. There are different Aptos network types, and each network type uses a different port. However,\nthe only network type that a PFN uses is the public network, where PFNs to connect to other PFNs and VFNs."}),"\n",(0,r.jsxs)(n.p,{children:["Your PFN can be configured so that the public network operates using a specific port on your node. You can configure\nthe port settings using the node configuration YAML file. Here is an ",(0,r.jsx)(n.a,{href:"https://github.com/aptos-labs/aptos-core/blob/main/config/src/config/test_data/public_full_node.yaml#L16",children:"example\nconfiguration file"})," for a PFN\nthat configures the public network to use port ",(0,r.jsx)(n.code,{children:"6180"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"port-settings",children:"Port settings"}),"\n",(0,r.jsx)(n.p,{children:"The recommendations described below assume the default port settings used by PFNs. If you have\nchanged the default port settings in your configuration file, then you should adjust the recommendations accordingly."}),"\n",(0,r.jsx)(n.admonition,{title:"Exposing ports",type:"caution",children:(0,r.jsx)(n.p,{children:"Unless explicitly required, we recommend that you do not expose any other ports while operating a PFN. This is because\nexposing additional ports can increase the attack surface of your node and make it more vulnerable to adversaries."})}),"\n",(0,r.jsx)(n.h4,{id:"running-a-pfn",children:"Running a PFN:"}),"\n",(0,r.jsx)(n.p,{children:"Assuming default ports are used, the following should be configured for PFNs:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Open the following TCP ports:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"6182"})," \u2013 ",(0,r.jsx)(n.strong,{children:"Public network"}),": Open this port publicly to enable other PFNs to connect to your PFN."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Close the following TCP ports:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"9101"})," \u2013 ",(0,r.jsx)(n.strong,{children:"Inspection service"}),": Close this port to prevent unauthorized metric inspection."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"9102"})," \u2013 ",(0,r.jsx)(n.strong,{children:"Admin service"}),": Close this port to prevent unauthorized admin service interaction."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"80/8080"})," ",(0,r.jsx)(n.strong,{children:"REST API"}),": Close this port to prevent unauthorized REST API access."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{title:"Exposing services",type:"danger",children:(0,r.jsxs)(n.p,{children:["The inspection service port (",(0,r.jsx)(n.code,{children:"9101"}),"), admin service port (",(0,r.jsx)(n.code,{children:"9102"}),") and the REST API port (",(0,r.jsx)(n.code,{children:"80"})," or ",(0,r.jsx)(n.code,{children:"8080"}),")\nare likely useful for your internal network, e.g., application development and debugging. However, the inspection service\nport and the admin service port should never be exposed publicly as they can be easily abused. Similarly, if you choose\nto expose the REST API endpoint publicly, you should deploy an additional authentication or rate-limiting mechanism to\nprevent abuse."]})}),"\n",(0,r.jsx)(n.h2,{id:"storage-requirements",children:"Storage requirements"}),"\n",(0,r.jsx)(n.p,{children:"The amount of data stored by Aptos PFNs depends on the ledger history (length) of the blockchain and the number of\non-chain states (e.g., accounts and resources). Both the ledger history and the number of\non-chain states depend on several additional factors, including the age of the blockchain, the average transaction\nrate over time, and the configuration of the ledger database pruner. At the time of writing, we estimate\nthat testnet and mainnet PFNs require several 100's of GB of storage."}),"\n",(0,r.jsx)(n.p,{children:"Note that because archival nodes store the entire history of the blockchain, the database size on archival nodes\nwill continue to grow unbounded. As a result, we cannot provide a recommendation for archival node storage sizes."}),"\n",(0,r.jsx)(n.admonition,{title:"Devnet blockchain storage",type:"tip",children:(0,r.jsxs)(n.p,{children:["The Aptos devnet is currently reset on a weekly basis. If you are deploying a devnet PFN, this means that the storage\nwill be reset (i.e., wiped) every week. See the ",(0,r.jsx)(n.code,{children:"#devnet-release"})," channel on the Aptos Discord."]})})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},83581:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>a});var r=t(11855);const o={},s=r.createContext(o);function i(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);