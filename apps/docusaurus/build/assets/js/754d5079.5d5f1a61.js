"use strict";(self.webpackChunkaptos_docs=self.webpackChunkaptos_docs||[]).push([[6904],{49443:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>u,default:()=>x,frontMatter:()=>h,metadata:()=>p,toc:()=>v});var o=n(63159),s=n(83581),a=(n(11855),n(5821)),i=n.n(a),r=n(51038);const c={blockquote:"blockquote_oP1f",note:"note_QwqN",info:"info_JBc5",warning:"warning_OkJ1",danger:"danger_k1Lj"},l=e=>{let{children:t,type:n="info"}=e;return(0,o.jsx)("blockquote",{className:(0,r.A)(c.blockquote,c[n]),children:t})};l.propTypes={children:i().oneOfType([i().array,i().string]).isRequired,type:i().oneOf(["info","warning","danger","note"])};const d=l,h={title:"Validator Nodes Overview"},u=void 0,p={id:"concepts/validator-nodes",title:"Validator Nodes Overview",description:"An Aptos node is an entity of the Aptos ecosystem that tracks the state of the Aptos blockchain. Clients interact with the blockchain via Aptos nodes. There are two types of nodes:",source:"@site/i18n/ja/docusaurus-plugin-content-docs/current/concepts/validator-nodes.md",sourceDirName:"concepts",slug:"/concepts/validator-nodes",permalink:"/concepts/validator-nodes",draft:!1,unlisted:!1,editUrl:"https://github.com/aptos-labs/developer-docs/edit/main/apps/docusaurus/docs/concepts/validator-nodes.md",tags:[],version:"current",lastUpdatedAt:1713368916,formattedLastUpdatedAt:"2024\u5e744\u670817\u65e5",frontMatter:{title:"Validator Nodes Overview"},sidebar:"aptosSidebar",previous:{title:"Aptos Blockchain Deep Dive",permalink:"/concepts/blockchain"},next:{title:"Fullnodes Overview",permalink:"/concepts/fullnodes"}},m={},v=[{value:"Overview",id:"overview",level:2},{value:"Validator node components",id:"validator-node-components",level:2},{value:"Mempool",id:"mempool",level:3},{value:"Consensus",id:"consensus",level:3},{value:"Execution",id:"execution",level:3},{value:"Virtual machine (VM)",id:"virtual-machine-vm",level:3},{value:"Storage",id:"storage",level:3},{value:"State synchronizer",id:"state-synchronizer",level:3}];function f(e){const t={a:"a",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.p,{children:"An Aptos node is an entity of the Aptos ecosystem that tracks the state of the Aptos blockchain. Clients interact with the blockchain via Aptos nodes. There are two types of nodes:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"Validator nodes"}),"\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.a,{href:"/concepts/fullnodes",children:"Fullnodes"})}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"Each Aptos node comprises several logical components:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.a,{href:"/reference/glossary#rest-service",children:"REST service"})}),"\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.a,{href:"#mempool",children:"Mempool"})}),"\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.a,{href:"#consensus",children:"Consensus (disabled in fullnodes)"})}),"\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.a,{href:"#execution",children:"Execution"})}),"\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.a,{href:"#virtual-machine-vm",children:"Virtual Machine"})}),"\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.a,{href:"#storage",children:"Storage"})}),"\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.a,{href:"#state-synchronizer",children:"State synchronizer"})}),"\n"]}),"\n",(0,o.jsxs)(t.p,{children:["The ",(0,o.jsx)(t.a,{href:"/reference/glossary#aptos-core",children:"Aptos-core"})," software can be configured to run as a validator node or as a fullnode."]}),"\n",(0,o.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsxs)(t.p,{children:["When a transaction is submitted to the Aptos blockchain, validator nodes run a distributed ",(0,o.jsx)(t.a,{href:"/reference/glossary#consensus-protocol",children:"consensus protocol"}),", execute the transaction, and store the transaction and the execution results on the blockchain. Validator nodes decide which transactions will be added to the blockchain and in which order."]}),"\n",(0,o.jsxs)(t.p,{children:["The Aptos blockchain uses a Byzantine Fault Tolerance (BFT) consensus protocol for validator nodes to agree on the ledger of finalized transactions and their execution results. Validator nodes process these transactions and include them in their local copy of the blockchain database. This means that up-to-date validator nodes always maintain a copy of the current ",(0,o.jsx)(t.a,{href:"/reference/glossary#state",children:"state"})," of the blockchain, locally."]}),"\n",(0,o.jsxs)(t.p,{children:["Validator nodes communicate directly with other validator nodes over a private network. ",(0,o.jsx)(t.a,{href:"/concepts/fullnodes",children:"Fullnodes"})," are an external validation and/or dissemination resource for the finalized transaction history. They receive transactions from peers and may re-execute them locally (the same way a validator executes transactions). Fullnodes store the results of re-executed transactions to local storage. In doing so, they can challenge any foul-play by validators and provide evidence if there is any attempt to re-write or modify the blockchain history. This helps to mitigate against validator corruption and/or collusion."]}),"\n",(0,o.jsx)(d,{type:"info",children:(0,o.jsx)(t.p,{children:"The AptosBFT consensus protocol provides fault tolerance of up to one-third of malicious validator nodes."})}),"\n",(0,o.jsx)(t.h2,{id:"validator-node-components",children:"Validator node components"}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"validator.svg",src:n(24083).A+"",width:"960",height:"540"})}),"\n",(0,o.jsx)(t.h3,{id:"mempool",children:"Mempool"}),"\n",(0,o.jsx)(t.p,{children:"Mempool is a component within each node that holds an in-memory buffer of transactions that have been submitted to the blockchain, but not yet agreed upon or executed. This buffer is replicated between validator nodes and fullnodes."}),"\n",(0,o.jsx)(t.p,{children:"The JSON-RPC service of a fullnode sends transactions to a validator node's mempool. Mempool performs various checks on the transactions to ensure transaction validity and protect against DOS attacks. When a new transaction passes initial verification and is added to mempool, it is then distributed to the mempools of other validator nodes in the network."}),"\n",(0,o.jsx)(t.p,{children:"When a validator node temporarily becomes a leader in the consensus protocol, consensus pulls the transactions from mempool and proposes a new transaction block. This block is broadcast to other validators and contains a total ordering over all transactions in the block. Each validator then executes the block and submits votes on whether to accept the new block proposal."}),"\n",(0,o.jsx)(t.h3,{id:"consensus",children:"Consensus"}),"\n",(0,o.jsx)(t.p,{children:"Consensus is the component that is responsible for ordering blocks of transactions and agreeing on the results of execution by participating in the consensus protocol with other validator nodes in the network."}),"\n",(0,o.jsx)(t.h3,{id:"execution",children:"Execution"}),"\n",(0,o.jsx)(t.p,{children:"Execution is the component that coordinates the execution of a block of transactions and maintains a transient state. Consensus votes on this transient state. Execution maintains an in-memory representation of the execution results until consensus commits the block to the distributed database. Execution uses the virtual machine to execute transactions. Execution acts as the glue layer between the inputs of the system (represented by transactions), storage (providing a persistency layer), and the virtual machine (for execution)."}),"\n",(0,o.jsx)(t.h3,{id:"virtual-machine-vm",children:"Virtual machine (VM)"}),"\n",(0,o.jsx)(t.p,{children:"The virtual machine (VM) is used to run the Move program within each transaction and determine execution results. A node's mempool uses the VM to perform verification checks on transactions, while execution uses the VM to execute transactions."}),"\n",(0,o.jsx)(t.h3,{id:"storage",children:"Storage"}),"\n",(0,o.jsx)(t.p,{children:"The storage component is used to persist agreed upon blocks of transactions and their execution results to the local database."}),"\n",(0,o.jsx)(t.h3,{id:"state-synchronizer",children:"State synchronizer"}),"\n",(0,o.jsx)(t.p,{children:"Nodes use their state synchronizer component to \u201ccatch up\u201d to the latest state of the blockchain and stay up-to-date."})]})}function x(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(f,{...e})}):f(e)}},24083:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/validator-444a20a96f90a1d3e9c1d7b84b402f68.svg"},83581:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>r});var o=n(11855);const s={},a=o.createContext(s);function i(e){const t=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(a.Provider,{value:t},e.children)}}}]);