"use strict";(self.webpackChunkaptos_docs=self.webpackChunkaptos_docs||[]).push([[3123],{66978:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>l,toc:()=>c});var o=n(63159),i=n(83581);const s={title:"Run a Localnet with Validator",slug:"run-a-localnet",sidebar_position:9},a="Run a Localnet with Validator",l={id:"nodes/localnet/run-a-localnet",title:"Run a Localnet with Validator",description:"Running a local testnet with the Aptos CLI is simpler and more fully featured. Learn how by following this guide: Run a Local Development Network with the CLI.",source:"@site/i18n/ja/docusaurus-plugin-content-docs/current/nodes/localnet/run-a-localnet.md",sourceDirName:"nodes/localnet",slug:"/nodes/localnet/run-a-localnet",permalink:"/nodes/localnet/run-a-localnet",draft:!1,unlisted:!1,editUrl:"https://github.com/aptos-labs/developer-docs/edit/main/apps/docusaurus/docs/nodes/localnet/run-a-localnet.md",tags:[],version:"current",lastUpdatedAt:1717819347,formattedLastUpdatedAt:"2024\u5e746\u67088\u65e5",sidebarPosition:9,frontMatter:{title:"Run a Localnet with Validator",slug:"run-a-localnet",sidebar_position:9},sidebar:"appSidebar",previous:{title:"Run a Local Development Network",permalink:"/guides/local-development-network"},next:{title:"Run a Local Multi-node Network",permalink:"/guides/running-a-local-multi-node-network"}},r={},c=[{value:"Using the Aptos-core source code",id:"using-the-aptos-core-source-code",level:2},{value:"Attaching a Faucet to your testnet",id:"attaching-a-faucet-to-your-testnet",level:3},{value:"Integracting with the localnet",id:"integracting-with-the-localnet",level:2},{value:"Next steps",id:"next-steps",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h1,{id:"run-a-localnet-with-validator",children:"Run a Localnet with Validator"}),"\n",(0,o.jsx)(t.admonition,{title:"Using the CLI to run a local development network",type:"tip",children:(0,o.jsxs)(t.p,{children:["Running a local testnet with the Aptos CLI is simpler and more fully featured. Learn how by following this guide: ",(0,o.jsx)(t.a,{href:"/guides/local-development-network",children:"Run a Local Development Network with the CLI"}),"."]})}),"\n",(0,o.jsx)(t.p,{children:"You can run a local testnet of the Aptos blockchain. This local testnet will not be connected to the Aptos devnet. It will run on your local machine, independent of other Aptos networks. You can use this local testnet for testing and development purposes."}),"\n",(0,o.jsx)(t.p,{children:"You can run a local testnet using the Aptos-core source code. This approach is useful for testing modifications to the Aptos-core codebase or to the Aptos Framework."}),"\n",(0,o.jsx)(t.p,{children:"The rest of this document describes:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"How to start your local testnet with a single validator node, and"}),"\n",(0,o.jsx)(t.li,{children:"How to start a Faucet service and attach it to your local testnet."}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"using-the-aptos-core-source-code",children:"Using the Aptos-core source code"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["Follow steps in ",(0,o.jsx)(t.a,{href:"/guides/building-from-source",children:"Building Aptos From Source"})]}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsx)(t.p,{children:"With your development environment ready, now you can start your testnet network. Before you proceed, make a note of the following:"}),"\n",(0,o.jsx)(t.admonition,{type:"tip",children:(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["When you run the below command to start the local testnet, your terminal will enter into an interactive mode, with a message ",(0,o.jsx)(t.code,{children:"Aptos is running, press ctrl-c to exit"}),". Hence, you will need to open another shell terminal for the subsequent steps described in this section."]}),"\n",(0,o.jsxs)(t.li,{children:["After the below command runs, copy the ",(0,o.jsx)(t.code,{children:"Test dir"})," information from the terminal output for the next step."]}),"\n"]})}),"\n",(0,o.jsx)(t.p,{children:"To start your testnet locally, run the following command:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:"CARGO_NET_GIT_FETCH_WITH_CLI=true cargo run -p aptos-node -- --test\n"})}),"\n",(0,o.jsxs)(t.p,{children:["See below for an example of the partial output. Make a note of the ",(0,o.jsx)(t.code,{children:"Test dir"})," from the output."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:'...\n...\n...\n\nCompleted generating configuration:\n    Log file: "/private/var/folders/gn/m74t8ylx55z935q8wx035qn80000gn/T/b3adc18c144bfcc78a1541953893bc1c/validator.log"\n    Test dir: "/private/var/folders/gn/m74t8ylx55z935q8wx035qn80000gn/T/b3adc18c144bfcc78a1541953893bc1c/0/node.yaml"\n    Aptos root key path: "/private/var/folders/gn/m74t8ylx55z935q8wx035qn80000gn/T/b3adc18c144bfcc78a1541953893bc1c/mint.key"\n    Waypoint: 0:47e676b5fe38ebe2aec6053db7b3daa0b805693d6422e3475e46e89499464ecf\n    ChainId: TESTING\n    REST API endpoint: 0.0.0.0:8080\n    Fullnode network: /ip4/0.0.0.0/tcp/7180\nAptos is running, press ctrl-c to exit\n'})}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.strong,{children:"NOTE"}),": The above command starts a local testnet with a single validator node. The command runs ",(0,o.jsx)(t.code,{children:"aptos-node"})," from a genesis-only ledger state. If you want to reuse the ledger state produced by a previous run of ",(0,o.jsx)(t.code,{children:"aptos-node"}),", then use:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:"cargo run -p aptos-node -- --test --config <config-path>\n"})}),"\n",(0,o.jsx)(t.h3,{id:"attaching-a-faucet-to-your-testnet",children:"Attaching a Faucet to your testnet"}),"\n",(0,o.jsx)(t.p,{children:"Faucets are stateless services that can be run in parallel with the testnet. A Faucet is a way to create Aptos test coins with no real-world value. You can use the Faucet by sending a request to create coins and transfer them into a given account on your behalf."}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsx)(t.li,{children:"Make sure that you started your local testnet as described in Step 5 above."}),"\n",(0,o.jsx)(t.li,{children:"Open a new shell terminal."}),"\n",(0,o.jsxs)(t.li,{children:["Copy the ",(0,o.jsx)(t.em,{children:"Aptos root key path"})," from your terminal where you started the testnet, and use it to replace the ",(0,o.jsx)(t.code,{children:"mint-key-file-path"})," in the below command."]}),"\n",(0,o.jsx)(t.li,{children:"Run the following command to start a Faucet:"}),"\n"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:'cargo run --package aptos-faucet-service -- run-simple --key-file-path "/tmp/694173aa3bbe019499bbd5cf3fe0e2fc/mint.key" --node-url http://127.0.0.1:8080 --chain-id TESTING\n'})}),"\n",(0,o.jsx)(t.p,{children:"This will start a Faucet running locally without any restrictions to tokens that can be claimed and minted. This Faucet service will be as accessible as the testnet you started above."}),"\n",(0,o.jsx)(t.h2,{id:"integracting-with-the-localnet",children:"Integracting with the localnet"}),"\n",(0,o.jsx)(t.p,{children:"After starting your localnet, you will see the following:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:'Entering test mode, this should never be used in production!\nCompleted generating configuration:\n        Log file: "/tmp/694173aa3bbe019499bbd5cf3fe0e2fc/validator.log"\n        Test dir: "/tmp/694173aa3bbe019499bbd5cf3fe0e2fc/0/node.yaml"\n        Aptos root key path: "/tmp/694173aa3bbe019499bbd5cf3fe0e2fc/mint.key"\n        Waypoint: 0:197bc8b76761622c2d2054d8bf93c1802fa0eb4bc55f0f3d4442878fdecc297f\n        ChainId: TESTING\n        REST API endpoint: 0.0.0.0:8080\n        Fullnode network: /ip4/0.0.0.0/tcp/7180\n\nAptos is running, press ctrl-c to exit\n'})}),"\n",(0,o.jsxs)(t.p,{children:["Use the ",(0,o.jsx)(t.a,{href:"/tools/aptos-cli/install-cli/",children:"Aptos CLI tool"})," to interact with your local testnet. The above output contains information you will use for starting the ",(0,o.jsx)(t.a,{href:"/tools/aptos-cli/use-cli/use-aptos-cli",children:"Aptos CLI tool"}),":"]}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"Aptos root key path"}),": The root key (also known as the mint or faucet key) controls the account that can mint tokens. Available in the docker compose folder under ",(0,o.jsx)(t.code,{children:"aptos_root_key"}),"."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"Waypoint"}),": A verifiable checkpoint of the blockchain (available in the docker compose folder under waypoint.txt)"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"REST endpoint"}),": The endpoint for the REST service, e.g., ",(0,o.jsx)(t.code,{children:"http://127.0.0.1:8080"}),"."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"ChainId"}),": The chain ID uniquely distinguishes this network from other blockchain networks."]}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,o.jsxs)(t.p,{children:["At this point, you will have a special root account at ",(0,o.jsx)(t.code,{children:"0x1"})," that can perform the mint operation. Follow up with:"]}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.a,{href:"/tutorials/your-first-transaction",children:"Your first transaction"})," to learn how to submit transactions."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.a,{href:"/tutorials/first-move-module",children:"Your first Move module"})," to learn how to create Move modules."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.a,{href:"/tutorials/your-first-coin",children:"Interacting with the Aptos Blockchain"})," to learn how to mint coins."]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},83581:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>l});var o=n(11855);const i={},s=o.createContext(i);function a(e){const t=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),o.createElement(s.Provider,{value:t},e.children)}}}]);