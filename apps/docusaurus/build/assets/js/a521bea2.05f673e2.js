"use strict";(self.webpackChunkaptos_docs=self.webpackChunkaptos_docs||[]).push([[3828],{85040:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>t,default:()=>p,frontMatter:()=>r,metadata:()=>a,toc:()=>i});var c=n(63159),o=n(83581);const r={title:"Move Scripts Tutorial"},t="Move\u30b9\u30af\u30ea\u30d7\u30c8",a={id:"move/move-on-aptos/scripts/script-tutorial",title:"Move Scripts Tutorial",description:"\u3053\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3067\u306f\u3001Move\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4f5c\u6210\u65b9\u6cd5\u3068\u5b9f\u884c\u65b9\u6cd5\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3059\u3002Move\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f7f\u7528\u3059\u308b\u3068\u3001\u516c\u958b\u3055\u308c\u305fMove\u30e2\u30b8\u30e5\u30fc\u30eb\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u5168\u4f53\u3067\u4e00\u9023\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002",source:"@site/i18n/ja/docusaurus-plugin-content-docs/current/move/move-on-aptos/scripts/script-tutorial.md",sourceDirName:"move/move-on-aptos/scripts",slug:"/move/move-on-aptos/scripts/script-tutorial",permalink:"/move/move-on-aptos/scripts/script-tutorial",draft:!1,unlisted:!1,editUrl:"https://github.com/aptos-labs/developer-docs/edit/main/apps/docusaurus/docs/move/move-on-aptos/scripts/script-tutorial.md",tags:[],version:"current",lastUpdatedAt:1721049661,formattedLastUpdatedAt:"2024\u5e747\u670815\u65e5",frontMatter:{title:"Move Scripts Tutorial"},sidebar:"appSidebar",previous:{title:"Running Move Scripts",permalink:"/move/move-on-aptos/scripts/running-scripts"},next:{title:"Resource Accounts",permalink:"/move/move-on-aptos/resource-accounts"}},d={},i=[{value:"\u4f7f\u7528\u4f8b",id:"\u4f7f\u7528\u4f8b",level:2},{value:"\u5b9f\u884c",id:"\u5b9f\u884c",level:2},{value:"\u9ad8\u5ea6\u306a...",id:"\u9ad8\u5ea6\u306a",level:2}];function l(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.h1,{id:"move\u30b9\u30af\u30ea\u30d7\u30c8",children:"Move\u30b9\u30af\u30ea\u30d7\u30c8"}),"\n",(0,c.jsxs)(s.p,{children:["\u3053\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3067\u306f\u3001",(0,c.jsx)(s.a,{href:"/move/book/modules-and-scripts",children:"Move\u30b9\u30af\u30ea\u30d7\u30c8"}),"\u306e\u4f5c\u6210\u65b9\u6cd5\u3068\u5b9f\u884c\u65b9\u6cd5\u306b\u3064\u3044\u3066\u89e3\u8aac\u3057\u307e\u3059\u3002Move\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f7f\u7528\u3059\u308b\u3068\u3001\u516c\u958b\u3055\u308c\u305fMove\u30e2\u30b8\u30e5\u30fc\u30eb\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u5168\u4f53\u3067\u4e00\u9023\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002"]}),"\n",(0,c.jsxs)(s.p,{children:["\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u8a73\u7d30\u306f\u3001",(0,c.jsx)(s.a,{href:"/move/move-on-aptos/scripts/",children:"Move\u30b9\u30af\u30ea\u30d7\u30c8\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8"}),"\u3092\u5fa1\u89a7\u4e0b\u3055\u3044\u3002"]}),"\n",(0,c.jsx)(s.h2,{id:"\u4f7f\u7528\u4f8b",children:"\u4f7f\u7528\u4f8b"}),"\n",(0,c.jsxs)(s.p,{children:["\u4ee5\u4e0b\u306e\u4f8b\u306f\u3001",(0,c.jsx)(s.a,{href:"https://github.com/aptos-labs/aptos-core/blob/main/aptos-move/framework/aptos-framework/sources/aptos_coin.move",children:"aptos_coin.move"})," \u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u3066\u3001\u5b9b\u5148\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u6b8b\u9ad8\u304c",(0,c.jsx)(s.code,{children:"desired_balance"}),"\u672a\u6e80\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3001",(0,c.jsx)(s.code,{children:"desired_balance"}),"\u672a\u6e80\u3067\u3042\u308b\u5834\u5408\u306f",(0,c.jsx)(s.code,{children:"desired_balance"}),"\u307e\u3067\u88dc\u5145\u3057\u307e\u3059\u3002"]}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{className:"language-move",children:"script {\n    use std::signer;\n    use aptos_framework::aptos_account;\n    use aptos_framework::aptos_coin;\n    use aptos_framework::coin;\n\n    fun main(src: &signer, dest: address, desired_balance: u64) {\n        let src_addr = signer::address_of(src);\n\n        addr::my_module::do_nothing();\n\n        let balance = coin::balance<aptos_coin::AptosCoin>(src_addr);\n        if (balance < desired_balance) {\n            aptos_account::transfer(src, dest, desired_balance - balance);\n        };\n    }\n}\n"})}),"\n",(0,c.jsx)(s.h2,{id:"\u5b9f\u884c",children:"\u5b9f\u884c"}),"\n",(0,c.jsx)(s.p,{children:"\u4f55\u3092\u9054\u6210\u3057\u305f\u3044\u304b\u304c\u5206\u304b\u3063\u305f\u3089\u3001\u4ee5\u4e0b\u3092\u6c7a\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u6709\u308a\u307e\u3059\u3002"}),"\n",(0,c.jsxs)(s.ul,{children:["\n",(0,c.jsx)(s.li,{children:"\u3053\u308c\u3089\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u3069\u3053\u3078\u7f6e\u3051\u3070\u826f\u3044\u304b?"}),"\n",(0,c.jsx)(s.li,{children:"\u4f55\u3068\u3044\u3046\u540d\u524d\u3092\u4ed8\u3051\u308b\u306e\u304b\uff1f"}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"Move.toml"}),"\u306f\u5fc5\u8981\u304b?"]}),"\n",(0,c.jsx)(s.li,{children:"CLI\u3092\u4f7f\u7528\u3057\u3066\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u3069\u3046\u3084\u3063\u3066\u5b9f\u884c\u3059\u308b\u304b?"}),"\n"]}),"\n",(0,c.jsxs)(s.p,{children:[(0,c.jsx)(s.a,{href:"/tools/aptos-cli/use-cli/use-aptos-cli",children:"Aptos CLI"}),"\u3092\u4f7f\u7528\u3057\u3066\u3001Move \u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3059\u308b\u65b9\u6cd5\u3092\u30b9\u30c6\u30c3\u30d7\u30d0\u30a4\u30b9\u30c6\u30c3\u30d7\u306e\u4f8b\u3067\u89e3\u8aac\u3057\u307e\u3059\u3002"]}),"\n",(0,c.jsxs)(s.ol,{children:["\n",(0,c.jsxs)(s.li,{children:["\n",(0,c.jsx)(s.p,{children:"\u4f5c\u696d\u7528\u306e\u65b0\u3057\u3044\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{className:"language-sh",children:"mkdir testing\ncd testing\n"})}),"\n"]}),"\n",(0,c.jsxs)(s.li,{children:["\n",(0,c.jsxs)(s.p,{children:["AptosCLI\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u3066",(0,c.jsx)(s.a,{href:"/tools/aptos-cli/use-cli/use-aptos-cli#use-the-aptos-cli",children:"\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059"}),":"]}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{className:"language-sh",children:"aptos init --network devnet\n"})}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(s.p,{children:["\u65e2\u5b58\u306e\u79d8\u5bc6\u9375( ",(0,c.jsx)(s.code,{children:"0xbd944102bf5b5dfafa7fe865d8fa719da6a1f0eafa3cd600f93385482d2c37a4"}),"\u306e\u69d8\u306a)\u3092\u518d\u5229\u7528\u3059\u308b\u4e8b\u3082\u3001\u30a2\u30ab\u30a6\u30f3\u30c8\u8a2d\u5b9a\u306e\u4e00\u74b0\u3068\u3057\u3066\u65b0\u3057\u3044\u79d8\u5bc6\u9375\u3092\u751f\u6210\u3059\u308b\u4e8b\u3082\u51fa\u6765\u307e\u3059\u3002\u4f8b\u3048\u3070\u30a2\u30ab\u30a6\u30f3\u30c8\u304c\u4ee5\u4e0b\u306e\u4f8b\u306e\u69d8\u306a\u5834\u5408\u3002"]}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{className:"language-sh",children:'---\nprofiles:\n  default:\n    private_key: "0xbd944102bf5b5dfafa7fe865d8fa719da6a1f0eafa3cd600f93385482d2c37a4"\n    public_key: "0x47673ec83bb254cc9a8bfdb31846daacd0c96fe41f81855462f5fc5306312b1b"\n    account: cb265645385819f3dbe71aac266e319e7f77aed252cacf2930b68102828bf615\n    rest_url: "https://api.devnet.aptoslabs.com"\n    faucet_url: "https://faucet.devnet.aptoslabs.com"\n'})}),"\n",(0,c.jsxs)(s.ol,{start:"3",children:["\n",(0,c.jsxs)(s.li,{children:["\n",(0,c.jsx)(s.p,{children:"\u540c\u3058\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304b\u3089\u3001\u65b0\u3057\u3044Move\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u521d\u671f\u5316\u3057\u307e\u3059\u3002"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{className:"language-sh",children:"aptos move init --name run_script\n"})}),"\n"]}),"\n",(0,c.jsxs)(s.li,{children:["\n",(0,c.jsxs)(s.p,{children:["\u4e0a\u8a18\u306e\u30b5\u30f3\u30d7\u30eb \u30b9\u30af\u30ea\u30d7\u30c8\u3092\u542b\u3080",(0,c.jsx)(s.code,{children:"my_script.move"}),"\u30d5\u30a1\u30a4\u30eb\u3092",(0,c.jsx)(s.code,{children:"testing/"}),"\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e",(0,c.jsx)(s.code,{children:"sources/"}),"\u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4f5c\u6210\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u4f8b\u306e\u3088\u3046\u306a",(0,c.jsx)(s.code,{children:"my_module.move"}),"\u30d5\u30a1\u30a4\u30eb\u3082\u4f5c\u6210\u3057\u307e\u3059\u3002"]}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{children:"module addr::my_module {\n    public entry fun do_nothing() { }\n}\n"})}),"\n",(0,c.jsx)(s.p,{children:"\u7d50\u679c\u306f\u3001\u4ee5\u4e0b\u306e\u69d8\u306a\u30d5\u30a1\u30a4\u30eb\u69cb\u9020\u3068\u306a\u308a\u307e\u3059\u3002"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{children:"testing/\n   Move.toml\n   sources/\n      my_script.move\n      my_module.move\n"})}),"\n"]}),"\n",(0,c.jsxs)(s.li,{children:["\n",(0,c.jsx)(s.p,{children:"\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u307e\u3059\u3002"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{children:'$ aptos move compile --named-addresses addr=cb265645385819f3dbe71aac266e319e7f77aed252cacf2930b68102828bf615\nCompiling, may take a little while to download git dependencies...\nINCLUDING DEPENDENCY AptosFramework\nINCLUDING DEPENDENCY AptosStdlib\nINCLUDING DEPENDENCY MoveStdlib\nBUILDING run_script\n{\n  "Result": [\n    "cb265645385819f3dbe71aac266e319e7f77aed252cacf2930b68102828bf615::my_module"\n  ]\n}\n'})}),"\n",(0,c.jsxs)(s.p,{children:["\u6ce8\u610f:",(0,c.jsx)(s.code,{children:"--named-addresses"}),"\u5f15\u6570\u306e\u4f7f\u7528\u65b9\u6cd5\u3002"]}),"\n",(0,c.jsxs)(s.p,{children:["\u3053\u308c\u304c\u5fc5\u8981\u306a\u306e\u306f\u30b3\u30fc\u30c9\u5185\u3067",(0,c.jsx)(s.code,{children:"addr"}),"\u3068\u3044\u3046\u540d\u524d\u4ed8\u304d\u30a2\u30c9\u30ec\u30b9\u3092\u53c2\u7167\u3059\u308b\u305f\u3081\u3067\u3059\u3002"]}),"\n",(0,c.jsxs)(s.p,{children:["\u30b3\u30f3\u30d1\u30a4\u30e9\u30fc\u306f\u3001\u3053\u308c\u304c\u4f55\u3092\u53c2\u7167\u3057\u3066\u3044\u308b\u304b\u3092\u8a8d\u8b58\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306eCLI\u5f15\u6570\u3092\u4f7f\u7528\u3059\u308b\u4ee3\u308f\u308a\u3001",(0,c.jsx)(s.code,{children:"Move.toml"}),"\u3078\u3053\u306e\u69d8\u306a\u5f15\u6570\u3092\u914d\u7f6e\u51fa\u6765\u307e\u3059\u3002"]}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{children:'[addresses]\naddr = "cb265645385819f3dbe71aac266e319e7f77aed252cacf2930b68102828bf615"\n'})}),"\n"]}),"\n",(0,c.jsxs)(s.li,{children:["\n",(0,c.jsx)(s.p,{children:"\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{children:'$ aptos move run-script --compiled-script-path build/my_script/bytecode_scripts/main.mv --args address:b078d693856a65401d492f99ca0d6a29a0c5c0e371bc2521570a86e40d95f823 --args u64:5\nDo you want to submit a transaction for a range of [17000 - 25500] Octas at a gas unit price of 100 Octas? [yes/no] >\nyes\n{\n  "Result": {\n    "transaction_hash": "0xa6ca6275c73f82638b88a830015ab81734a533aebd36cc4647b48ff342434cdf",\n    "gas_used": 3,\n    "gas_unit_price": 100,\n    "sender": "cb265645385819f3dbe71aac266e319e7f77aed252cacf2930b68102828bf615",\n    "sequence_number": 4,\n    "success": true,\n    "timestamp_us": 1683030933803632,\n    "version": 3347495,\n    "vm_status": "Executed successfully"\n  }\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(s.p,{children:["\u6ce8\u610f:\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u30d1\u30b9\u306f",(0,c.jsx)(s.code,{children:"build/my_script/"}),"\u3067\u306f\u306a\u304f",(0,c.jsx)(s.code,{children:"build/run_script/"}),"\u4e0b\u3067\u3042\u308b\u3053\u3068\u3002\u3053\u308c\u306f\u3001",(0,c.jsx)(s.code,{children:"Move.toml"}),"\u306b\u542b\u307e\u308c\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u305f\u3081\u3067\u3059\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u306f",(0,c.jsx)(s.code,{children:"aptos move init --name run_script"}),"\u3092\u5b9f\u884c\u3057\u305f\u6642\u304b\u3089\u306e",(0,c.jsx)(s.code,{children:"run_script"}),"\u3067\u3059\u3002"]}),"\n",(0,c.jsxs)(s.p,{children:["\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b",(0,c.jsx)(s.a,{href:"https://github.com/banool/move-examples/tree/main/run_script",children:"\u30b3\u30fc\u30c9"}),"\u3092\u5fa1\u89a7\u4e0b\u3055\u3044\u3002\u5b8c\u5168\u306a\u4f8b\u304c\u3001\u30e6\u30fc\u30b6\u30fc\u304c\u4f5c\u6210\u3057\u305fMove\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u4f9d\u5b58\u3059\u308bMove\u30af\u30ea\u30d7\u30c8\u306e\u4f7f\u7528\u65b9\u6cd5\u306b\u3064\u3044\u3066\u3082\u89e3\u8aac\u3057\u3066\u3044\u307e\u3059\u3002"]}),"\n",(0,c.jsxs)(s.p,{children:["Aptos\u958b\u767a\u8005\u30c7\u30a3\u30b9\u30ab\u30c3\u30b7\u30e7\u30f3\u306eAptos CLI\u306e\u304b\u308f\u308a\u306b",(0,c.jsx)(s.a,{href:"https://github.com/aptos-labs/aptos-developer-discussions/discussions/24",children:"Rust SDK"}),"\u3092\u4f7f\u7528\u3057\u3066\u3053\u308c\u3092\u884c\u3046\u65b9\u6cd5\u3082\u5fa1\u89a7\u4e0b\u3055\u3044\u3002"]}),"\n",(0,c.jsx)(s.h2,{id:"\u9ad8\u5ea6\u306a",children:"\u9ad8\u5ea6\u306a..."}),"\n",(0,c.jsxs)(s.p,{children:["\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u3088\u308a\u52b9\u7387\u7684\u306a\u65b9\u6cd5\u3067\u5b9f\u884c\u3059\u308b\u4e8b\u3082\u51fa\u6765\u307e\u3059\u3002",(0,c.jsx)(s.code,{children:"aptos move compile"}),"\u3068",(0,c.jsx)(s.code,{children:"aptos move run-script --compiled-script-path"}),"\u3092\u5225\u3005\u3067\u5b9f\u884c\u3059\u308b\u306e\u3067\u306f\u306a\u304f\u3001\u305f\u3060\u3053\u308c\u3092\u3084\u308b\u3060\u3051\u3067\u3059\u3002"]}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{children:"$ aptos move run-script --script-path sources/my_script.move --args address:b078d693856a65401d492f99ca0d6a29a0c5c0e371bc2521570a86e40d95f823 --args u64:5\n"})}),"\n",(0,c.jsxs)(s.p,{children:["\u3053\u308c\u306b\u3088\u308a\u3001\u4e21\u65b9\u306e\u624b\u9806\u304c\u3072\u3068\u3064\u306eCLI\u30b3\u30de\u30f3\u30c9\u3067\u884c\u308f\u308c\u307e\u3059\u304c\u3001",(0,c.jsx)(s.a,{href:"https://github.com/aptos-labs/aptos-core/issues/5733",children:"\u554f\u984c"}),"\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u305f\u3081\u3001\u4eca\u306e\u3068\u3053\u308d\u306f\u3001\u524d\u306e2\u6bb5\u968e\u306e\u30a2\u30d7\u30ed\u30fc\u30c1\u3092\u4f7f\u7528\u3059\u308b\u4e8b\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002"]})]})}function p(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,c.jsx)(s,{...e,children:(0,c.jsx)(l,{...e})}):l(e)}},83581:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>a});var c=n(11855);const o={},r=c.createContext(o);function t(e){const s=c.useContext(r);return c.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),c.createElement(r.Provider,{value:s},e.children)}}}]);