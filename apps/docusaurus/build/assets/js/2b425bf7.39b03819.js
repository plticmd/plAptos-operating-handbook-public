"use strict";(self.webpackChunkaptos_docs=self.webpackChunkaptos_docs||[]).push([[3533],{69322:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>a});var s=n(63159),o=n(83581);const r={title:"Telemetry"},i=void 0,l={id:"reference/telemetry",title:"Telemetry",description:"When you run a node on an Aptos network, your node will send telemetry data to Aptos Labs. All node types",source:"@site/i18n/ja/docusaurus-plugin-content-docs/current/reference/telemetry.md",sourceDirName:"reference",slug:"/reference/telemetry",permalink:"/reference/telemetry",draft:!1,unlisted:!1,editUrl:"https://github.com/aptos-labs/developer-docs/edit/main/apps/docusaurus/docs/reference/telemetry.md",tags:[],version:"current",lastUpdatedAt:1713276994,formattedLastUpdatedAt:"2024\u5e744\u670816\u65e5",frontMatter:{title:"Telemetry"},sidebar:"nodeSidebar",previous:{title:"Data Pruning",permalink:"/guides/data-pruning"},next:{title:"Locating Node Files",permalink:"/nodes/node-files-all-networks/node-files-index"}},c={},a=[{value:"Node telemetry",id:"node-telemetry",level:2},{value:"CLI telemetry",id:"cli-telemetry",level:2},{value:"Disabling telemetry",id:"disabling-telemetry",level:2},{value:"Configuring telemetry",id:"configuring-telemetry",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"When you run a node on an Aptos network, your node will send telemetry data to Aptos Labs. All node types\n(e.g., validators, VFNs and PFNs) send telemetry data. This also occurs for other binaries (e.g., the Aptos CLI).\nIf you would prefer not to send telemetry, you can disable telemetry using the instructions below."}),"\n",(0,s.jsx)(t.admonition,{title:"No personal information is collected",type:"danger",children:(0,s.jsxs)(t.p,{children:["The Aptos node binary does ",(0,s.jsx)(t.strong,{children:"not"})," collect any personal information, such as usernames or email addresses.\nIt only collects relevant node telemetry, such as software version, node metrics, operating system information and the IP\naddress of your node. This data is used to enhance the decentralization and performance of the network."]})}),"\n",(0,s.jsx)(t.h2,{id:"node-telemetry",children:"Node telemetry"}),"\n",(0,s.jsx)(t.p,{children:"The list below shows the categories of information collected by Aptos node telemetry:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Core metrics:"})," Core metrics are those emitted by the core components of the ",(0,s.jsx)(t.code,{children:"aptos-node"})," binary. These include,\nstate sync, consensus, mempool and storage. You can see the full list of core metrics,\n",(0,s.jsx)(t.a,{href:"https://github.com/aptos-labs/aptos-core/blob/main/crates/aptos-telemetry/src/core_metrics.rs#L14-L29",children:"here"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Build information"}),": Rust build information, including the versions of Rust, cargo, the target architecture and\nthe build tag are also collected. You can see the full list of build information, ",(0,s.jsx)(t.a,{href:"https://github.com/aptos-labs/aptos-core/blob/main/crates/aptos-build-info/src/lib.rs#L8-L20",children:"here"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"System information"}),": System information is also collected by node telemetry. This includes resource information\n(e.g., CPU, RAM, disk and network specifications) as well as operating system information. You can see the full list of\nsystem information, ",(0,s.jsx)(t.a,{href:"https://github.com/aptos-labs/aptos-core/blob/main/crates/aptos-telemetry/src/system_information.rs#L14-L32",children:"here"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Network metrics:"}),": Network metrics are also collected by node telemetry. These include network information such as\nthe number of connected peers, the number of inbound and outbound messages, and the size of messages sent and received.\nYou can see the full list of network metrics, ",(0,s.jsx)(t.a,{href:"https://github.com/aptos-labs/aptos-core/blob/main/crates/aptos-telemetry/src/network_metrics.rs#L12-L17",children:"here"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Prometheus metrics"}),": Prometheus metrics are also collected by node telemetry. These include runtime metrics\nfor all the components of the ",(0,s.jsx)(t.code,{children:"aptos-node"})," binary. You can see the full list of Prometheus metrics by visiting the\nmetrics endpoint on your node using the ",(0,s.jsx)(t.a,{href:"/nodes/measure/node-inspection-service",children:"node inspection service"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Node logs"}),": Logs of warn-level and higher are also collected by node telemetry. These are used to monitor the\nhealth of the network. You can identify these logs by filtering the logs for the ",(0,s.jsx)(t.code,{children:"aptos-node"})," binary, locally."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"cli-telemetry",children:"CLI telemetry"}),"\n",(0,s.jsx)(t.p,{children:"The Aptos CLI tool also collects telemetry data. The list below shows the categories of information collected by\nCLI telemetry:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Command metrics"}),": Command metrics are those emitted by the CLI when a command is executed. These\ninclude the command itself, the latency of the command, and the success or failure of the command. You can see\nthe full list of CLI metrics,\n",(0,s.jsx)(t.a,{href:"https://github.com/aptos-labs/aptos-core/blob/main/crates/aptos-telemetry/src/cli_metrics.rs#L12-L15",children:"here"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Build information"}),": Rust build information, including the versions of Rust, cargo, the target architecture and\nthe build tag are also collected for the CLI. You can see the full list of build information, ",(0,s.jsx)(t.a,{href:"https://github.com/aptos-labs/aptos-core/blob/main/crates/aptos-build-info/src/lib.rs#L8-L20",children:"here"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"disabling-telemetry",children:"Disabling telemetry"}),"\n",(0,s.jsxs)(t.p,{children:["On macOS and Linux, you can set the ",(0,s.jsx)(t.code,{children:"APTOS_DISABLE_TELEMETRY"})," environment variable to disable the metrics sent by\nboth the Aptos node and the Aptos CLI tool. To disable all telemetry, set ",(0,s.jsx)(t.code,{children:"APTOS_DISABLE_TELEMETRY"})," environment to ",(0,s.jsx)(t.code,{children:"true"}),":"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"export APTOS_DISABLE_TELEMETRY=true\n"})}),"\n",(0,s.jsx)(t.p,{children:"The above command only disables telemetry for a single session in the current terminal where you run the command.\nTo disable it permanently across all terminals and Aptos binary invocations, include it in your startup profile.\nFor example:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:'echo "export APTOS_DISABLE_TELEMETRY=true" >> ~/.profile\nsource ~/.profile\n'})}),"\n",(0,s.jsx)(t.h2,{id:"configuring-telemetry",children:"Configuring telemetry"}),"\n",(0,s.jsx)(t.p,{children:"You can also configure telemetry to disable specific telemetry metrics and collections. The environment variable\nlist below shows the variables you can set to configure telemetry for Aptos nodes and the CLI:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"APTOS_DISABLE_TELEMETRY"}),": This disables all telemetry emission, including sending telemetry to the Google Analytics service (GA4)."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"APTOS_FORCE_ENABLE_TELEMETRY"}),": This overrides the chain ID check and forces the Aptos node to send telemetry regardless of whether the remote service accepts it or not."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"APTOS_DISABLE_TELEMETRY_PUSH_METRICS"}),": This disables sending ",(0,s.jsx)(t.a,{href:"https://prometheus.io/",children:"Prometheus"})," metrics."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"APTOS_DISABLE_TELEMETRY_PUSH_LOGS"}),": This disables sending logs."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"APTOS_DISABLE_TELEMETRY_PUSH_EVENTS"}),": This disables sending custom events."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"APTOS_DISABLE_LOG_ENV_POLLING"}),": This disables the dynamic ability to send verbose logs."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"APTOS_DISABLE_PROMETHEUS_NODE_METRICS"}),": This disables sending the Aptos node resource metrics such as system CPU, memory, etc."]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},83581:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>l});var s=n(11855);const o={},r=s.createContext(o);function i(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);